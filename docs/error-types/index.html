<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Pyre Errors | Pyre</title><meta data-react-helmet="true" property="og:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" property="twitter:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Pyre"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Pyre Errors | Pyre"><meta data-react-helmet="true" name="description" content="Elaboration on some categories of errors thrown by Pyre."><meta data-react-helmet="true" property="og:description" content="Elaboration on some categories of errors thrown by Pyre."><meta data-react-helmet="true" property="og:url" content="https://pyre-check.org/docs/error-types"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pyre-check.org/docs/error-types"><link rel="stylesheet" href="/styles.f363b666.css">
<link rel="preload" href="/styles.3a138e7f.js" as="script">
<link rel="preload" href="/runtime~main.92932561.js" as="script">
<link rel="preload" href="/main.e729ed85.js" as="script">
<link rel="preload" href="/1.20e7ad5e.js" as="script">
<link rel="preload" href="/2.d43329e7.js" as="script">
<link rel="preload" href="/27.fe99e35f.js" as="script">
<link rel="preload" href="/28.ab90c72c.js" as="script">
<link rel="preload" href="/20ac7829.f88dea4a.js" as="script">
<link rel="preload" href="/f9269969.576b50bb.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/integrated_logo_light.png" alt="Pyre Logo"></a><a class="navbar__item navbar__link" href="/docs/installation">Getting Started</a><a class="navbar__item navbar__link" href="/docs/overview">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/integrated_logo_light.png" alt="Pyre Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/installation">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/overview">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Pyre</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guided-tour">Guided Tour</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration">Configuring Pyre</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/gradual-typing">Gradual Typing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/error-suppression">Error Suppression</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/error-types">Error Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/lsp-integration">Editor Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/watchman-integration">Watchman Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/querying-pyre">Querying Pyre</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Pysa</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-basics">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-running">Running Pysa</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-features">Feature Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-advanced">Advanced Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-model-generators">Dynamically Generating Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-tips">Development Tips</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-coverage">Coverage Increasing Strategies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/static-analysis-post-processor">Static Analysis Processor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pysa-additional-resources">Additional Resources</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Pyre Errors</h1></header><div class="markdown"><p>Elaboration on some categories of errors thrown by Pyre.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pyre-error-9-incompatible-variable-type"></a>Pyre Error [9]: Incompatible Variable Type<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pyre-error-9-incompatible-variable-type" title="Direct link to heading">#</a></h2><p>Pyre will error when assigning incompatible types to local variables and parameters that were explicitly annotated.</p><p>That is, the following will error:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def f(x: int) -&gt; None:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  x = &quot;&quot; # Incompatible variable type error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  y: int = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  y = &quot;&quot; # Incompatible variable type error</span></div></div></div></div></div><p>The rationale here is that it&#x27;s surprising for an explicitly annotated variable to have an
incompatible type later on in the same function.</p><p>If you intended to change the type of the variable, you can explicitly annotate it with the new type:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def f(x: int) -&gt; None:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  x: str = &quot;&quot; # No errors!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  y: int = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  y: str = &quot;&quot; # No errors!</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pyre-errors-1415-behavioral-subtyping"></a>Pyre Errors [14/15]: Behavioral Subtyping<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pyre-errors-1415-behavioral-subtyping" title="Direct link to heading">#</a></h2><p>Method overrides should follow
<a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" target="_blank" rel="noopener noreferrer">Liskov&#x27;s substitution principle</a>.
In short, parameter types can&#x27;t be more restrictive and return types
can&#x27;t be more permissive in overridden methods. To see why, consider the following example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  def width(image: Image) -&gt; float:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return image.width()</span></div></div></div></div></div><p>Say we now have different implementations of our <code>Image</code> class, one of which
violates the substitution principle:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class Image:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @abstractmethod:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def width() -&gt; float: pass</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class JpegImage(Image):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def width() -&gt; int: return 10  # this is fine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class ComplexImage(Image):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def width() -&gt; complex: return 1j</span></div></div></div></div></div><p>Clearly our <code>width</code> function above breaks when used with a <code>ComplexImage</code> instance.
The case for parameters follows analogously.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pyre-errors-16-missing-attributes"></a>Pyre Errors [16]: Missing Attributes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pyre-errors-16-missing-attributes" title="Direct link to heading">#</a></h2><p>Your code is most likely trying to access an attribute that Pyre does not know about.
Pyre has various ways of inferring what is an attribute of an object:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="explicitly-declared"></a>Explicitly Declared<a aria-hidden="true" tabindex="-1" class="hash-link" href="#explicitly-declared" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class Derp:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute: int = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @property</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def property(self) -&gt; int: ...</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="implicitly-declared"></a>Implicitly Declared<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implicitly-declared" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class Derp:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       self.attribute: int = 1</span></div></div></div></div></div><p>Pyre does one level of inlining to infer implicit parameters
We suggest you do not heavily rely on this feature as it is not sound and makes our code brittle.
Support for this is temporary.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pyre-errors-1821-undefined-name-undefined-import"></a>Pyre Errors [18/21]: Undefined Name, Undefined Import<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pyre-errors-1821-undefined-name-undefined-import" title="Direct link to heading">#</a></h2><p>Error 18 (&quot;Undefined name&quot;) is raised when your code tries to access a variable or function that Pyre could not resolve.
This is usually caused by failing to import the proper module.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;import some_module&#x27; is missing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  some_module.some_func()</span></div></div></div></div></div><p>Pyre will raise error 21 instead (&quot;Undefined import&quot;) when the import statement is present, but the module to be imported could not be found in the search path.
If the module provides stub files, please provide their location via the <code>--search-path</code> commandline parameter.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="list-and-dictionary-mismatches-with-subclassing"></a>List and Dictionary Mismatches With Subclassing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#list-and-dictionary-mismatches-with-subclassing" title="Direct link to heading">#</a></h2><p>Pyre will error when, for instance, a <code>List[int]</code> is passed in when a <code>List[float]</code> is expected, as in the following example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def to_seconds(milliseconds: List[float]) -&gt; List[int]:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return [int(x/1000.0) for x in milliseconds]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my_list: List[int] = [1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my_list = to_seconds(my_list) # Pyre errors here!</span></div></div></div></div></div><p>This code is fine at runtime, so it might be surprising that Pyre errors here. However, consider the following code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def halve_first_element(list: List[float]) -&gt; None:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  list[0] /= 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my_list: List[int] = [1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">halve_first_element(my_list)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function_taking_int(my_list[0]) # Oh no, my_list[0] is 0.5!</span></div></div></div></div></div><p>If we allowed passing in <code>my_list</code> to the <code>halve_first_element</code> function here, the above code would type check. It&#x27;s perfectly valid from the perspective of the callee to modify the list&#x27;s element to be a float, as it was annotated as taking a list of floats, but because this list escapes the scope of the callee, we can&#x27;t allow this in the type checker.</p><p>To work around this, we can signal to the type checker that the parameter can&#x27;t be modified. Here&#x27;s how you can tell the type checker that you won&#x27;t change the container in your function:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># I can&#x27;t modify milliseconds here, so it&#x27;s safe to pass a Iterable[int].</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">def to_seconds(milliseconds: Iterable[float]) -&gt; List[int]:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return [int(x/1000.0) for x in milliseconds]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my_list: List[int] = [1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my_list = to_seconds(my_list) # Type checks!</span></div></div></div></div></div><p><code>typing.Iterable</code> is an immutable variant for lists that allows accessing the list without modifying it. Most commonly used generic containers have immutable variants, and I would encourage you to use them for function parameters whenever you don&#x27;t need to modify a container in your function.
Here are some immutable variants for commonly used containers:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typing.List → typing.Sequence (if you need random access via my_list[id])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typing.List → typing.Iterable (if you&#x27;re just iterating over the list in a loop and want to support sets as well)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typing.Dict → typing.Mapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typing.Set → typing.AbstractSet</span></div></div></div></div></div><p>Invariance, combined with type inference, comes with a few gotchas. When you write an expression, Pyre infers the most precise type possible. For instance, Pyre infers the <code>List[int]</code> type for <code>[1, 2]</code>, even though <code>List[float]</code> would be a perfectly valid type here. This can cause issues, as in the following example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def zeroes(number_of_elements: int) -&gt; List[float]:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  a = [0] * number_of_elements</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return a # Pyre errors here!</span></div></div></div></div></div><p>What happened above is that Pyre inferred a type of <code>List[int]</code> for a, and invariance kicked in. You can work around this by adding an explicit annotation when declaring a:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">def zeroes(number_of_elements: int) -&gt; List[float]:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  a: List[float] = [0] * number_of_elements</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return a # Type checks!</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="35-invalid-type-variance"></a>[35]: Invalid type variance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#35-invalid-type-variance" title="Direct link to heading">#</a></h2><p>In brief, read-only data types can be covariant, write-only data types can be contravariant, and data types that support both reads and writes must be invariant.
If a data type implements any functions accepting parameters of that type, we cannot guarantee that writes are not happening. If a data type implements any functions returning values of that type, we cannot guarantee that reads are not happening.
For example (note: int is a subclass of float in the type system and in these examples):
Writes taking covariants:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">_T_co = typing.TypeVar(&quot;_T_co&quot;, covariant=True)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class MyList(typing.Generic[_T_co]):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def write(self, element: _T_co) -&gt; None:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ... # adds element to list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">def takes_float_list(float_list: MyList[float]) -&gt; None:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    float_list.write(1.0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int_list: MyList[int] = ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">takes_float_list(int_list)  # this call is OK because MyList is covariant: MyList[int] &lt; MyList[float]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># int_list contains floats</span></div></div></div></div></div><p>Reads returning contravariants:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">_T_cont = typing.TypeVar(&quot;_T_cont&quot;, contravariant=True)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class MyList(typing.Generic[_T_cont]):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    def read(self) -&gt; _T_cont:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ... # returns first element from list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">def takes_int_list(int_list: MyList[int]) -&gt; int:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return int_list.read()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">float_list: MyList[float] = ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">takes_int_list(float_list)  # this call is OK because MyList is contravariant: MyList[float] &lt; MyList[int]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># problem with return above is clear</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/error-suppression"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Error Suppression</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/lsp-integration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">See Pyre Errors In Your Editor »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pyre-error-9-incompatible-variable-type" class="table-of-contents__link">Pyre Error 9: Incompatible Variable Type</a></li><li><a href="#pyre-errors-1415-behavioral-subtyping" class="table-of-contents__link">Pyre Errors 14/15: Behavioral Subtyping</a></li><li><a href="#pyre-errors-16-missing-attributes" class="table-of-contents__link">Pyre Errors 16: Missing Attributes</a><ul><li><a href="#explicitly-declared" class="table-of-contents__link">Explicitly Declared</a></li><li><a href="#implicitly-declared" class="table-of-contents__link">Implicitly Declared</a></li></ul></li><li><a href="#pyre-errors-1821-undefined-name-undefined-import" class="table-of-contents__link">Pyre Errors 18/21: Undefined Name, Undefined Import</a></li><li><a href="#list-and-dictionary-mismatches-with-subclassing" class="table-of-contents__link">List and Dictionary Mismatches With Subclassing</a></li><li><a href="#35-invalid-type-variance" class="table-of-contents__link">35: Invalid type variance</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></a></div><div>Copyright &#169; 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.3a138e7f.js"></script>
<script src="/runtime~main.92932561.js"></script>
<script src="/main.e729ed85.js"></script>
<script src="/1.20e7ad5e.js"></script>
<script src="/2.d43329e7.js"></script>
<script src="/27.fe99e35f.js"></script>
<script src="/28.ab90c72c.js"></script>
<script src="/20ac7829.f88dea4a.js"></script>
<script src="/f9269969.576b50bb.js"></script>
</body>
</html>